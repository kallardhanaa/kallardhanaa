name: Plane Crash Animation

on:
  schedule:
    - cron: "0 */12 * * *"  # 2x sehari
  workflow_dispatch:

jobs:
  generate:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Generate Plane Crash SVG
        run: |
          cat > plane-crash.svg << 'EOF'
          <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
            <!-- Background Sky -->
            <rect width="800" height="500" fill="#87CEEB"/>
            <!-- Sun -->
            <circle cx="700" cy="80" r="40" fill="#FFD700">
              <animate attributeName="opacity" values="0.5;1;0.5" dur="4s" repeatCount="indefinite"/>
            </circle>
            
            <!-- Gedung 1 -->
            <rect x="50" y="200" width="120" height="300" fill="#4A90E2" stroke="#2E5B9F" stroke-width="4"/>
            <rect x="70" y="180" width="80" height="20" fill="#6AB0FF" stroke="#2E5B9F" stroke-width="2"/>
            
            <!-- Gedung 2 (SASARAN) -->
            <rect x="200" y="150" width="150" height="350" fill="#2E5B9F" stroke="#1A3A6D" stroke-width="6"/>
            <rect x="230" y="130" width="90" height="20" fill="#4A90E2"/>
            <rect x="250" y="110" width="70" height="20" fill="#6AB0FF"/>
            
            <!-- Jendela Gedung 2 -->
            <rect x="220" y="190" width="15" height="25" fill="#B3D9FF" opacity="0.8"/>
            <rect x="260" y="190" width="15" height="25" fill="#B3D9FF" opacity="0.8"/>
            <rect x="300" y="190" width="15" height="25" fill="#B3D9FF" opacity="0.8"/>
            
            <!-- Pesawat -->
            <g id="plane" transform="translate(50,100)">
              <!-- Body -->
              <path d="M0 0 Q20 -10 40 0 L60 5 L40 10 Z" fill="#C0C0C0" stroke="#666" stroke-width="2"/>
              <!-- Wings -->
              <path d="M10 -5 L-10 0 L10 5" fill="#A0A0A0" stroke="#666" stroke-width="1.5"/>
              <!-- Engine -->
              <rect x="45" y="-3" width="15" height="6" rx="3" fill="#333"/>
            </g>
            
            <!-- Asap Mesin -->
            <g id="smoke">
              <circle cx="80" cy="105" r="3" fill="#666" opacity="0.6">
                <animate attributeName="r" values="3;8;3" dur="1s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="0.6;0.2;0.6" dur="1s" repeatCount="indefinite"/>
                <animateTransform attributeName="transform" type="translate" values="0,0;0,5;0,0" dur="1s" repeatCount="indefinite"/>
              </circle>
            </g>
            
            <!-- Animasi Pesawat Terbang -->
            <animateTransform
              xlink:href="#plane"
              attributeName="transform"
              type="translate"
              values="50,100; 750,120; 780,160"
              dur="6s"
              fill="freeze"/>
            <animateTransform
              xlink:href="#plane"
              attributeName="transform"
              type="rotate"
              values="0 40 0; -15 40 0; -90 40 0"
              dur="6s"
              additive="sum"
              fill="freeze"/>
            
            <!-- Ledakan (mulai detik 6s) -->
            <g id="explosion" opacity="0">
              <circle cx="380" cy="160" r="0" fill="#FF4444" opacity="0.8">
                <animate attributeName="r" values="0;60;120" begin="6s" dur="1s" fill="freeze"/>
                <animate attributeName="opacity" values="0.8;0.4;0" begin="6s" dur="1s" fill="freeze"/>
              </circle>
              <circle cx="380" cy="160" r="0" fill="#FF8800" opacity="0.7">
                <animate attributeName="r" values="0;40;80" begin="6.1s" dur="1s" fill="freeze"/>
                <animate attributeName="opacity" values="0.7;0.3;0" begin="6.1s" dur="1s" fill="freeze"/>
              </circle>
              <circle cx="380" cy="160" r="0" fill="#FFFF44" opacity="0.9">
                <animate attributeName="r" values="0;25;50" begin="6.2s" dur="1s" fill="freeze"/>
                <animate attributeName="opacity" values="0.9;0.5;0" begin="6.2s" dur="1s" fill="freeze"/>
              </circle>
              <!-- Debris -->
              <rect x="380" y="160" width="10" height="3" fill="#666" opacity="0">
                <animateTransform attributeName="transform" type="translate" values="0,0;50,-30" begin="6.3s" dur="1s"/>
                <animate attributeName="opacity" values="1;0" begin="6.3s" dur="1s"/>
              </rect>
              <circle cx="400" cy="170" r="4" fill="#999" opacity="0">
                <animateTransform attributeName="transform" type="translate" values="0,0;-30,50" begin="6.4s" dur="1s"/>
                <animate attributeName="opacity" values="1;0" begin="6.4s" dur="1s"/>
              </circle>
            </g>
            
            <!-- Api Berkobar (mulai detik 7s) -->
            <g id="fire" opacity="0">
              <path d="M370 170 Q380 150 390 170 Q385 190 375 170" fill="#FF4400">
                <animateTransform attributeName="transform" type="translate" values="0,0;5,-10;-3,8;0,0" dur="0.5s" repeatCount="indefinite" begin="7s"/>
                <animate attributeName="opacity" values="0.8;1;0.8" dur="0.5s" repeatCount="indefinite" begin="7s"/>
              </path>
            </g>
            
            <!-- Animasi Ledakan Trigger -->
            <animate attributeName="opacity" xlink:href="#explosion" values="0;1" begin="6s" dur="0.1s"/>
            <animate attributeName="opacity" xlink:href="#fire" values="0;1" begin="7s" dur="0.1s"/>
            
            <!-- Loop Reset (12s total) -->
            <animateTransform
              xlink:href="#plane"
              attributeName="transform"
              type="translate"
              values="780,160;50,100"
              dur="3s"
              begin="12s"
              fill="freeze"/>
          </svg>
          EOF
      
      - name: Push SVG to output branch
        uses: crazy-max/ghaction-github-pages@v3.1.0
        with:
          target_branch: output
          build_dir: .
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
